---
deployment:
  tasks:
    - echo "Activating virtual environment"
    # - export DJANGO_DIR=$HOME/repositories/boattrade/boattrade-api
    # - export REACT_DIR=$HOME/repositories/boattrade/boattrade-frontend
    # - export VENV_DIR=$HOME/virtualenv/repositories/boattrade/boattrade-api/3.12

    # # Backend Setup
    # - echo "Activating virtual environment"
    # - source $VENV_DIR/bin/activate
    # - cd $DJANGO_DIR
    # - pip install --upgrade pip
    # - pip install -r requirements.txt
    # - python3 manage.py migrate
    # - python3 manage.py collectstatic --noinput
    # - python3 manage.py createsuperuser --noinput || true

    # # Frontend Setup
    # - echo "Building React app"
    # - cd $REACT_DIR
    # - npm install
    # - npm run build
    # # - cp $REACT_DIR/.htaccess $REACT_DIR/build/.htaccess

    # # Restart server
    # - echo "Restarting application"
    # - mkdir -p $DJANGO_DIR/tmp
    # - touch $DJANGO_DIR/tmp/restart.txt
